# 시스템 아키텍처

## 전체 흐름

1. 개발자가 커밋을 시도
2. CLI 레벨에서 AI 에이전트 개입
3. 변경된 코드 / diff / 컨텍스트 분석
4. AI가 다음을 수행
    - 변경 의도 추론
    - 도메인 개념 변화 여부 판단
    - 커밋 메시지 초안 생성
5. 개발자는 수정 또는 승인
6. 정제된 커밋 메시지로 최종 커밋

---

## Claude CLI 기반 아키텍처 구상

### 구성 요소

#### Agent
- 커밋 컨텍스트를 이해하는 주체
- 도메인 언어를 학습·유지

#### Skill
- Diff 분석
- 도메인 키워드 추출
- 변경 유형 분류 (개념 추가 / 정책 변경 / 구조 리팩터링 등)

#### Context Store (개념적)
- 이전 커밋에서 축적된 도메인 설명
- 용어 사전 / 규칙 요약

---

## 도메인 학습의 분기 지점 관리

### 기존 문제

- 중요한 도메인 전환점이 코드 diff에 묻힘
- 리뷰 시점 이후 맥락 손실

### 해결 방식

AI가 다음 질문을 내부적으로 수행:
- "이 변경은 새로운 개념인가?"
- "기존 규칙의 해석 변경인가?"

해당 판단 결과를 커밋 메시지에 반영

### 결과

커밋 히스토리는 다음을 제공한다:

- 도메인 진화 경로
- 잘못된 방향의 조기 감지
- 신규 인원의 학습 자료
